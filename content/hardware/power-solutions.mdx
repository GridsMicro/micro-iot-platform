---
title: 'Off-Grid Power Solutions for Smart Farm'
date: '2025-01-02'
---

# Off-Grid Power Solutions for Smart Farm IoT Devices

## Why Renewable Energy for Smart Farm?

à¹€à¸à¸©à¸•à¸£à¸à¸£à¸ªà¹ˆà¸§à¸™à¹ƒà¸«à¸à¹ˆà¸¡à¸µà¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¸Ÿà¸²à¸£à¹Œà¸¡à¸«à¹ˆà¸²à¸‡à¸ˆà¸²à¸à¹à¸«à¸¥à¹ˆà¸‡à¹„à¸Ÿà¸Ÿà¹‰à¸² à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸žà¸¥à¸±à¸‡à¸‡à¸²à¸™à¸—à¸”à¹à¸—à¸™à¸ˆà¸¶à¸‡à¹€à¸›à¹‡à¸™à¸—à¸²à¸‡à¹€à¸¥à¸·à¸­à¸à¸—à¸µà¹ˆà¸”à¸µà¸—à¸µà¹ˆà¸ªà¸¸à¸”:

âœ… **à¸›à¸£à¸°à¸«à¸¢à¸±à¸”à¸„à¹ˆà¸²à¹„à¸Ÿ** - à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢à¸„à¹ˆà¸²à¹„à¸Ÿà¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™  
âœ… **à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¹„à¸”à¹‰à¸—à¸¸à¸à¸—à¸µà¹ˆ** - à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸£à¸­à¸à¸²à¸£à¹„à¸Ÿà¸Ÿà¹‰à¸²à¹€à¸‚à¹‰à¸²à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ  
âœ… **à¹€à¸›à¹‡à¸™à¸¡à¸´à¸•à¸£à¸à¸±à¸šà¸ªà¸´à¹ˆà¸‡à¹à¸§à¸”à¸¥à¹‰à¸­à¸¡** - à¸¥à¸”à¸à¸²à¸£à¸›à¸¥à¹ˆà¸­à¸¢ COâ‚‚  
âœ… **à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰ 24/7** - à¹ƒà¸Šà¹‰à¹à¸šà¸•à¹€à¸•à¸­à¸£à¸µà¹ˆà¸ªà¸³à¸£à¸­à¸‡  

---

## Power Consumption of IoT Devices

### Typical Smart Farm Node:
- **ESP32**: 80-160 mA (Active), 5-10 mA (Deep Sleep)
- **STM32**: 30-50 mA (Active), 1-2 mA (Sleep)
- **DHT22 Sensor**: 1-1.5 mA
- **Relay Module**: 50-70 mA (when ON)
- **Total Average**: ~100-200 mA @ 5V = 0.5-1W

### Daily Energy Consumption:
```
Scenario 1: Always Active
100 mA Ã— 24 hours = 2.4 Ah/day Ã— 5V = 12 Wh/day

Scenario 2: Deep Sleep (Wake every 5 min)
Average 20 mA Ã— 24 hours = 0.48 Ah/day Ã— 5V = 2.4 Wh/day
```

**Recommendation**: Use Deep Sleep mode to save 80% energy!

---

## Solution 1: Solar Power System

### ðŸŒž Small Solar Setup (Single Node)

**Components:**
1. **Solar Panel**: 10W (6V) - ~à¸¿200-300
2. **Charge Controller**: TP4056 or CN3791 - ~à¸¿30-50
3. **Battery**: 18650 Li-ion 3.7V 3000mAh (2-3 cells) - ~à¸¿100-150
4. **DC-DC Converter**: LM2596 (Step-down to 5V) - ~à¸¿30
5. **Wires & Connectors** - ~à¸¿50

**Total Cost**: ~à¸¿400-600 (~$12-18 USD)

### Wiring Diagram:

```
Solar Panel (6V 10W)
    |
    v
[Charge Controller] ---> Battery (3.7V 6000mAh)
    |                        |
    +------------------------+
                |
                v
        [DC-DC Converter 5V]
                |
                v
            ESP32/STM32
```

### Recommended Products (Shopee/Lazada):

**Solar Panel:**
- 10W 6V Polycrystalline (~à¸¿250)
- 20W 12V Monocrystalline (~à¸¿400) - Better efficiency

**Charge Controller:**
- TP4056 Module with Protection (~à¸¿30)
- CN3791 MPPT Solar Charger (~à¸¿80) - Better for solar

**Battery:**
- 18650 3.7V 3000mAh (~à¸¿50/cell)
- Use 2 cells in parallel = 6000mAh
- Or 3 cells = 9000mAh for longer runtime

### Calculation Example:

**Solar Panel**: 10W @ 6V = 1.67A (peak)  
**Daily Generation** (5 hours good sunlight):  
10W Ã— 5h = 50 Wh/day

**Battery Capacity**:  
6000mAh @ 3.7V = 22.2 Wh

**Runtime without sun**:  
22.2 Wh Ã· 2.4 Wh/day = **9 days** (with deep sleep!)

---

## Solution 2: Wind Power System

### ðŸ’¨ Small Wind Turbine Setup

**Components:**
1. **Mini Wind Turbine**: 100W 12V - ~à¸¿1,500-2,500
2. **Charge Controller**: PWM 12V 10A - ~à¸¿200-300
3. **Battery**: 12V 7Ah Lead-Acid or LiFePO4 - ~à¸¿400-800
4. **DC-DC Converter**: Buck converter 12V to 5V - ~à¸¿50

**Total Cost**: ~à¸¿2,200-3,700 (~$65-110 USD)

### When to Use Wind Power?

âœ… **Open areas** with consistent wind (>3 m/s average)  
âœ… **Coastal regions** or hilltops  
âœ… **Supplement to solar** during rainy season  
âš ï¸ **Not recommended** for enclosed farms or low-wind areas  

### Wiring Diagram:

```
Wind Turbine (12V 100W)
    |
    v
[PWM Charge Controller] ---> Battery (12V 7Ah)
    |                            |
    +----------------------------+
                |
                v
        [Buck Converter 5V]
                |
                v
            ESP32/STM32
```

### Wind Turbine Selection:

**100W Turbine** (~à¸¿2,000):
- Start-up wind speed: 2.5 m/s
- Rated wind speed: 12 m/s
- Suitable for: Small farms, 1-3 nodes

**400W Turbine** (~à¸¿5,000):
- More power for multiple nodes
- Requires stronger mounting

---

## Solution 3: Hybrid Solar + Wind

### ðŸŒžðŸ’¨ Best of Both Worlds

**Why Hybrid?**
- Solar works during day
- Wind works during night/rainy season
- Maximum uptime (99%+)

**Components:**
1. Solar Panel: 20W 12V - ~à¸¿400
2. Wind Turbine: 100W 12V - ~à¸¿2,000
3. Hybrid Charge Controller: 12V 20A - ~à¸¿500
4. Battery: 12V 12Ah LiFePO4 - ~à¸¿1,200
5. DC-DC Converter: 12V to 5V - ~à¸¿50

**Total Cost**: ~à¸¿4,200 (~$125 USD)

### Wiring Diagram:

```
Solar Panel (20W)    Wind Turbine (100W)
        |                    |
        +--------------------+
                |
                v
    [Hybrid Charge Controller]
                |
                v
        Battery (12V 12Ah)
                |
                v
        [Buck Converter 5V]
                |
                v
            ESP32/STM32
```

---

## Battery Selection Guide

### 1. **18650 Li-ion** (Best for small systems)
- **Voltage**: 3.7V
- **Capacity**: 2000-3500 mAh
- **Pros**: Cheap, high energy density
- **Cons**: Needs protection circuit
- **Price**: ~à¸¿50-80/cell

### 2. **Lead-Acid** (Budget option)
- **Voltage**: 12V
- **Capacity**: 7-20 Ah
- **Pros**: Very cheap, robust
- **Cons**: Heavy, lower lifespan
- **Price**: ~à¸¿400-800

### 3. **LiFePO4** (Best for long-term)
- **Voltage**: 12.8V
- **Capacity**: 7-20 Ah
- **Pros**: Long life (2000+ cycles), safe
- **Cons**: More expensive
- **Price**: ~à¸¿1,200-2,500

**Recommendation**: 
- **Small farm (1-2 nodes)**: 18650 Li-ion
- **Medium farm (3-5 nodes)**: 12V 12Ah LiFePO4
- **Large farm (10+ nodes)**: 12V 20Ah LiFePO4

---

## Power Management Tips

### 1. **Use Deep Sleep Mode**

**ESP32 Example:**
```cpp
#include <esp_sleep.h>

void setup() {
  // Read sensors
  // Send data via MQTT
  
  // Sleep for 5 minutes
  esp_sleep_enable_timer_wakeup(5 * 60 * 1000000); // microseconds
  esp_deep_sleep_start();
}
```

**Power Savings**: 80 mA â†’ 5 mA = **94% reduction!**

### 2. **Optimize Sensor Reading**

- Don't read sensors every second
- Read every 5-10 minutes for temperature/humidity
- Use interrupts for critical sensors

### 3. **Turn Off Unused Peripherals**

```cpp
// Disable WiFi when not needed
WiFi.disconnect(true);
WiFi.mode(WIFI_OFF);

// Disable Bluetooth
btStop();
```

---

## Monitoring Power System

### Add Voltage Monitoring to Your IoT Node

**Components:**
- Voltage Divider (2Ã— Resistors)
- ADC Pin on ESP32/STM32

**Circuit:**
```
Battery (+) ---[10kÎ©]---+---[10kÎ©]--- GND
                        |
                     ADC Pin
```

**Code (ESP32):**
```cpp
float readBatteryVoltage() {
  int raw = analogRead(34); // ADC pin
  float voltage = (raw / 4095.0) * 3.3 * 2; // Voltage divider ratio
  return voltage;
}

void loop() {
  float batteryVoltage = readBatteryVoltage();
  
  if (batteryVoltage < 3.3) {
    Serial.println("WARNING: Low battery!");
    // Send alert via MQTT
  }
  
  // Send battery status to dashboard
  sendMQTT("battery_voltage", batteryVoltage);
}
```

---

## Installation Tips

### Solar Panel Placement:
1. **Face South** (in Northern Hemisphere) or **Face North** (in Southern Hemisphere)
2. **Tilt angle** = Your latitude (e.g., Bangkok ~13Â°)
3. **No shadows** from 10 AM - 2 PM
4. **Clean regularly** (dust reduces efficiency by 20-30%)

### Wind Turbine Placement:
1. **Height**: At least 5-10 meters above ground
2. **Clear area**: No obstacles within 20 meters
3. **Secure mounting**: Use strong pole, guy wires
4. **Check local regulations**: Some areas require permits

### Weatherproofing:
- Use **IP65 waterproof boxes** for electronics (~à¸¿100-200)
- Seal all cable entries with **silicone sealant**
- Use **UV-resistant cables** for outdoor wiring
- Add **lightning protection** if in open area

---

## Cost Comparison

| Solution | Initial Cost | Monthly Cost | Uptime | Best For |
|----------|-------------|--------------|--------|----------|
| **Grid Power** | à¸¿500-1,000 | à¸¿100-300 | 95% | Near power lines |
| **Solar Only** | à¸¿400-600 | à¸¿0 | 85-90% | Sunny areas |
| **Wind Only** | à¸¿2,200-3,700 | à¸¿0 | 70-80% | Windy areas |
| **Hybrid** | à¸¿4,200+ | à¸¿0 | 95-99% | Remote farms |

---

## Real-World Example: Smart Farm Node

### Setup:
- **Location**: Chiang Mai (Northern Thailand)
- **Power**: 20W Solar + 12V 12Ah LiFePO4
- **Devices**: 1Ã— ESP32, 3Ã— Sensors, 1Ã— Relay
- **Power consumption**: 2.5 Wh/day (with deep sleep)

### Results:
- **Uptime**: 99.2% (365 days)
- **Downtime**: Only 3 days during heavy rain
- **ROI**: Paid off in 6 months (vs grid power)

---

## Troubleshooting

### Problem: Battery drains quickly
**Solutions:**
1. Check for current leaks (use multimeter)
2. Enable deep sleep mode
3. Reduce sensor reading frequency
4. Check if solar panel is getting enough sun

### Problem: Solar panel not charging
**Solutions:**
1. Check panel voltage with multimeter (should be 6-7V in sun)
2. Clean panel surface
3. Check charge controller connections
4. Verify battery is not already full

### Problem: Wind turbine not spinning
**Solutions:**
1. Check if wind speed is above start-up threshold (2.5 m/s)
2. Lubricate bearings
3. Check for obstructions
4. Verify turbine is facing the wind

---

## Advanced: Solar Tracking System

For 30-40% more efficiency, add a simple solar tracker:

**Components:**
- 2Ã— LDR (Light Dependent Resistors)
- 1Ã— Servo motor
- Arduino/ESP32 for control

**How it works:**
- Compare light intensity from 2 LDRs
- Rotate panel to face brighter side
- Update position every 15 minutes

**Cost**: +à¸¿300-500  
**Benefit**: 30-40% more power generation

---

## Recommended Suppliers (Thailand)

### Online:
- **Shopee**: Search "solar panel 10w" or "wind turbine 100w"
- **Lazada**: Good for batteries and charge controllers
- **AliExpress**: Cheapest, but 2-4 weeks shipping

### Physical Stores (Bangkok):
- **Baan & Beyond**: Solar panels, batteries
- **HomePro**: Basic solar kits
- **Siam Square**: Electronics components

---

## Need Help?

If you have questions about power systems for your Smart Farm, contact us!

<LineContactButton lineOaId="@smartfarm" message="à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¸£à¸±à¸š à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸ªà¸­à¸šà¸–à¸²à¸¡à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¸£à¸°à¸šà¸šà¸žà¸¥à¸±à¸‡à¸‡à¸²à¸™à¸ªà¸³à¸«à¸£à¸±à¸š Smart Farm" />

---

**Last Updated**: 2025-12-29  
**Difficulty**: Intermediate  
**Estimated Cost**: à¸¿400-4,200 depending on solution
